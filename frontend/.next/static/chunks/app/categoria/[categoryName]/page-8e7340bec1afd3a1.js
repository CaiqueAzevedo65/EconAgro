(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[841],{3481:function(e,t,r){Promise.resolve().then(r.bind(r,4151))},4151:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var a=r(7437);r(2265);var o=r(9376),n=r(8841),s=r(1268),c=r(5217);function i(){let e=(0,o.useParams)(),t=(0,o.useRouter)(),r=e.categoryName?decodeURIComponent(e.categoryName):"";return(0,a.jsx)("div",{className:"min-h-screen bg-bg-light py-8",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 pb-4 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-dark capitalize mb-4 md:mb-0 relative pl-4 border-l-4 border-primary",children:r}),(0,a.jsxs)("button",{onClick:()=>t.push("/"),className:"flex items-center text-gray-600 hover:text-primary transition-colors font-medium",children:[(0,a.jsx)(s.G,{icon:c.acZ,className:"mr-2"}),"Voltar para Home"]})]}),(0,a.jsx)(n.Z,{category:r})]})})}},8841:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var a=r(7437),o=r(2265),n=r(4681),s=r(5143),c=r(5583),i=r(1780),l=r(3464),d=r(257);let u=l.Z.create({baseURL:(()=>{let e=d.env.NEXT_PUBLIC_API_URL||d.env.REACT_APP_API_URL;if(!e)return"http://localhost:3001/api";let t=e.replace(/\/$/,"");return/\/api$/i.test(t)?t:"".concat(t,"/api")})(),headers:{"Content-Type":"application/json"}});u.interceptors.request.use(e=>(console.log("Enviando requisi\xe7\xe3o: ".concat(e.method.toUpperCase()," ").concat(e.url)),e),e=>(console.error("Erro na requisi\xe7\xe3o:",e),Promise.reject(e))),u.interceptors.response.use(e=>(console.log("Resposta recebida: ".concat(e.status," ").concat(e.config.url)),e),e=>{var t;return console.error("Erro na resposta:",null===(t=e.response)||void 0===t?void 0:t.status,e.message),Promise.reject(e)});var m={async getProducts(e){try{let t;t=e?await u.get("/products/category/".concat(encodeURIComponent(e))):await u.get("/products");let r=[];t.data&&(Array.isArray(t.data)?r=t.data:t.data.data&&Array.isArray(t.data.data)?r=t.data.data:(console.warn("Estrutura de dados inesperada:",t.data),r=[]));let a=u.defaults.baseURL.replace(/\/api\/?$/,"");return r.map(e=>{let t=e.img&&e.img.startsWith("http")?e.img:e.img?"".concat(a).concat(e.img):"https://placehold.co/300x200?text=Imagem+n\xe3o+encontrada";return(0,i._)((0,c._)({},e),{img:t})})}catch(e){throw console.error("Erro no servi\xe7o de produtos:",e),e}}};let x="https://placehold.co/300x200?text=Imagem+n\xe3o+encontrada";var h=function(e){let{category:t}=e,{addToCart:r}=(0,n.j)(),{searchTerm:c}=(0,s.R)(),[i,l]=(0,o.useState)([]),[d,u]=(0,o.useState)([]),[h,p]=(0,o.useState)(!0),[f,g]=(0,o.useState)(null),[v,b]=(0,o.useState)(null),y=e=>{e.target.src=x,e.target.onerror=null},j=e=>{r(e),b(e.id||e._id||e.name),setTimeout(()=>{b(null)},1e3)};return((0,o.useEffect)(()=>{(async()=>{try{p(!0),g(null);let e=await m.getProducts(t);l(e),u(e)}catch(e){console.error("Erro ao buscar produtos:",e),g("Erro ao carregar produtos. Tente novamente mais tarde.")}finally{p(!1)}})()},[t]),(0,o.useEffect)(()=>{if(c){let e=c.toLowerCase();u(i.filter(t=>t.name.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e)))}else u(i)},[c,i]),h)?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500 font-medium",children:"Carregando produtos..."}):f?(0,a.jsx)("div",{className:"text-center py-8 text-error font-medium",children:f}):i.length?c&&!d.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:['Nenhum produto encontrado para "',(0,a.jsx)("span",{className:"font-bold",children:c}),'".',(0,a.jsx)("br",{}),(0,a.jsx)("small",{className:"text-gray-400",children:"Tente buscar por outros termos."})]}):(0,a.jsx)("main",{className:"w-full",children:(0,a.jsx)("section",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[c&&(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-dark",children:['Resultados para: "',c,'"']}),(0,a.jsxs)("p",{className:"text-gray-600",children:[d.length," produto(s) encontrado(s)"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:d.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden flex flex-col h-full border border-gray-100",children:[(0,a.jsx)("div",{className:"relative h-48 w-full bg-gray-100 overflow-hidden group",children:(0,a.jsx)("img",{src:e.img||x,alt:e.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:y})}),(0,a.jsxs)("div",{className:"p-4 flex flex-col flex-grow",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-dark mb-2 line-clamp-2",children:e.name}),(0,a.jsx)("p",{className:"text-primary font-bold text-xl mb-4 mt-auto",children:e.price}),(0,a.jsx)("button",{className:"w-full py-2 px-4 rounded-md font-bold transition-all duration-300 transform active:scale-95 ".concat(v===(e.id||e._id||e.name)?"bg-success text-white cursor-default":"bg-primary text-white hover:bg-secondary hover:shadow-md"),onClick:()=>j(e),disabled:v===(e.id||e._id||e.name),children:v===(e.id||e._id||e.name)?"Adicionado!":"Adicionar ao Carrinho"})]})]},e.id||e._id||e.name))})]})})}):(0,a.jsx)("div",{className:"text-center py-8 text-gray-500 font-medium",children:"Nenhum produto encontrado."})}},4681:function(e,t,r){"use strict";r.d(t,{Z:function(){return i},j:function(){return l}});var a=r(5583),o=r(1780),n=r(7437),s=r(2265);let c=(0,s.createContext)();function i(e){let{children:t}=e,[r,i]=(0,s.useState)([]);return(0,n.jsx)(c.Provider,{value:{cart:r,addToCart:e=>{i(t=>t.find(t=>t.name===e.name)?t.map(t=>t.name===e.name?(0,o._)((0,a._)({},t),{quantity:t.quantity+1}):t):[...t,(0,o._)((0,a._)({},e),{quantity:1})])},removeFromCart:e=>{i(t=>t.filter(t=>t.name!==e))},clearCart:()=>{i([])},updateQuantity:(e,t)=>{t<1||i(r=>r.map(r=>r.name===e?(0,o._)((0,a._)({},r),{quantity:t}):r))}},children:t})}function l(){let e=(0,s.useContext)(c);if(!e)throw Error("useCart must be used within a CartProvider");return e}},5143:function(e,t,r){"use strict";r.d(t,{R:function(){return c},X:function(){return s}});var a=r(7437),o=r(2265);let n=(0,o.createContext)();function s(e){let{children:t}=e,[r,s]=(0,o.useState)(""),[c,i]=(0,o.useState)([]),[l,d]=(0,o.useState)(!1);return(0,a.jsx)(n.Provider,{value:{searchTerm:r,searchResults:c,isSearching:l,setSearchResults:i,setIsSearching:d,updateSearch:e=>{s(e)},clearSearch:()=>{s(""),i([]),d(!1)}},children:t})}function c(){let e=(0,o.useContext)(n);if(!e)throw Error("useSearch must be used within a SearchProvider");return e}}},function(e){e.O(0,[676,268,301,971,117,744],function(){return e(e.s=3481)}),_N_E=e.O()}]);